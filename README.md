# AI 기반 가맹점 분석 대시보드: 내 가게를 살리는 AI 비밀상담사

[![Streamlit App](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://2025-bigcontest-uwnj8yevx6qjrn5ccclqvy.streamlit.app/)

소상공인의 데이터 기반 의사결정을 돕기 위해 개발된 Streamlit 웹 애플리케이션입니다. 복잡한 데이터 분석에 어려움을 겪는 가맹점주와 컨설턴트를 위해, **회복탄력성** 진단과 **실제 고객 리뷰(네이버 지도 기반)** 분석을 결합한 3가지 특화 AI 에이전트를 제공하여 맞춤형 인사이트와 실행 가능한 전략을 제시합니다.

✨ **지금 바로 사용해보세요:** [Streamlit 서비스 바로가기](https://2025-bigcontest-uwnj8yevx6qjrn5ccclqvy.streamlit.app/) ✨

<img src="agent/assets/스크린샷 2025-10-24 115100.png">

---

## 🎯 문제 제기: 위기의 소상공인, 데이터 기반 '회복탄력성' 강화가 시급!

소상공인들은 전문성 부족, 조직화 결여, 네트워크 부재 등으로 경쟁력 확보에 어려움을 겪으며, 특히 COVID-19와 같은 외부 충격에 취약합니다. 이러한 위기 속에서 단순히 버티는 것을 넘어, 변화에 적응하고 성장하기 위한 **회복탄력성** (외부 충격에 예견, 준비, 대응, 적응하는 역량) 강화가 필수적입니다. 본 서비스는 데이터 분석을 통해 가맹점의 회복탄력성을 진단하고, 이를 강화하는 맞춤형 마케팅 전략을 제시하여 장기적인 생존과 성장을 돕고자 합니다. 더 나아가, **네이버 지도 API 기반의 실제 고객 리뷰 데이터**를 활용하여 온라인 평판까지 분석, 종합적인 솔루션을 제공합니다.

---

## 🚀 솔루션 개요: 3가지 AI 에이전트가 제공하는 맞춤형 분석

본 서비스는 목적에 따라 특화된 3가지 AI 에이전트를 제공합니다.

1.  **🔎 우리 가게 데이터 분석 (Agent 1):** 매장의 종합 '건강 상태' 심층 진단 및 **회복탄력성 기반** 맞춤 전략 제안.
2.  **🌐 온라인 대중성 스코어 분석 (Agent 2):** **네이버 지도 실제 리뷰** 기반 온라인 '고객 평판' 정량화 및 개선점 도출.
3.  **🏆 1위 가게 vs 우리 가게 분석 (Agent 3):** 동일 상권/업종 **1위 경쟁사**와의 성과 '격차' 즉각 비교 및 벤치마킹 포인트 제공.

---

## ✨ 핵심 기능 상세

### 1. 🔎 우리 가게 데이터 분석 (Agent 1)

매장의 종합적인 '건강 상태'를 심층 진단하고 회복탄력성 기반의 맞춤 전략을 제안합니다. 사용자의 특정 가맹점 분석 요청(예: "동원\* 가맹점 분석")을 처리하기 위해 **RAG(Retrieval-Augmented Generation)** 기술을 활용합니다. 먼저, HF 임베딩 모델 (`jhgan/ko-sroberta-nli`)을 사용해 사용자 쿼리를 고유한 벡터로 변환합니다. 이 벡터를 이용해 Milvus 벡터 DB에서 가장 유사한 가맹점 이름 벡터를 찾아, 해당 가맹점의 상세 데이터(과거 24개월치 주요 지표 및 고객 정보가 담긴 JSON 문자열)를 반환합니다.

검색된 풍부한 시계열 컨텍스트(JSON 데이터)는 사용자의 원본 질문과 함께, 회복탄력성(재무/운영/관계) 지표의 정의, 해석 규칙, 전체 매장 대비 통계적 벤치마크(평균, 분포 등), 그리고 각 탄력성 유형별 개선 전략 예시가 명시된 특수 프롬프트(`STORE_RAG_PROMPT`)와 결합되어 **Gemini AI**로 전달됩니다. Gemini는 이 상세 지침과 데이터를 바탕으로, 해당 가맹점의 현황을 요약하는 '가맹점 스냅샷'을 생성하고, **회복탄력성 수준을 객관적으로 진단**하여 강점과 리스크를 분석합니다. 최종적으로, 분석 결과를 종합하여 **가장 취약한 회복탄력성 영역(Weak Point) 개선에 초점을 맞춘 우선순위 실행 전략**을 제안하며, 분석에 사용된 핵심 근거 데이터를 요약한 '참고 컨텍스트'까지 포함된 실용적인 리포트를 마크다운 형식으로 제공합니다.

<img src="agent/assets/스크린샷 2025-10-22 211457.png">

### 2. 🌐 온라인 대중성 스코어 분석 (Agent 2) - *특화질문 1 연계*

**네이버 지도 API 기반의 실제 고객 리뷰 데이터**를 분석하여 온라인상의 '고객 평판'을 객관적으로 정량화하고 개선점을 도출합니다. 온라인에서의 매력도가 중요해진 최신 트렌드를 반영하여, 가게가 모든 고객층에게 얼마나 보편적으로 매력적인지 분석합니다.

* **데이터 수집:** 네이버 Local Search API로 마스킹된 가맹점명을 실제 상호와 매칭하고, Selenium을 이용해 네이버 플레이스에서 실제 리뷰 텍스트와 날짜를 직접 크롤링합니다.
* **페르소나 기반 분석:** 수집된 리뷰를 세대/성별 기반 10개 페르소나 관점에서 평가합니다. 평가는 '키워드 점수'(긍/부정 키워드 가중치 합)와 'KSF 점수'(청결/속도/가성비 등 주제별 긍/부정 단서 기반 점수)를 합산하여 'total\_sum'을 계산합니다. 이후 각 페르소나별 장/단점/개선점을 LLM(Gemini)으로 생성하여 JSON 리포트(`_persona_report.json`)로 저장합니다.
* **AI 분석 및 대시보드:** 사용자가 가게명을 입력하면, 해당 가게의 JSON 리포트를 **Gemini AI**가 분석합니다. AI는 지시에 따라 ①**종합 호감도**(모든 페르소나 total\_sum 평균), ②**호감도 균형지수**(total\_sum 변동계수), ③**페르소나 긍정 반응률**(total\_sum>0 비율) 등 새로운 정량 지표를 계산하고, ④페르소나별 점수를 **내림차순 정렬**하며, ⑤고객 불만(Cons)과 개선 제안(Suggestions)을 의미적으로 **1:1 매핑**하여 실행 가능한 조치를 생성합니다. 이 결과는 핵심 평판 지표, 고객층별 호감도 순위(상세 내용 토글 가능), 문제점↔해결 전략 매핑 테이블로 구성된 인터랙티브 대시보드로 제공됩니다.

<img src="agent/assets/스크린샷 2025-10-22 213813.png">

### 3. 🏆 1위 가게 vs 우리 가게 분석 (Agent 3) - *특화질문 2 연계*

우리 가게와 동일 상권 및 업종에서 **네이버 지도 저장 수 기준 1위**인 경쟁사와의 성과 '격차'를 **즉각적으로** 시각화하여 보여줍니다. 이 기능은 **AI 모델을 실시간으로 호출하지 않고**, Agent 2와 동일한 방식으로 미리 생성된 각 가게의 페르소나 JSON 리포트(`_vs_leader.json`)를 **단순히 읽어와 비교하고 렌더링**하는 방식으로 작동합니다.

* **격차 분석:** 사용자가 우리 가게명을 입력하면, 각 페르소나별로 우리 가게 점수와 1위 가게 점수, 그리고 그 **격차(Gap)**를 명확히 보여줍니다.
* **진단 요약:** 두 가게의 **공통 장점**(유지/확장 요소), **우리 가게 단점**(개선 필요 지점), **1위 가게 성공 요인**(벤치마킹 포인트)을 요약하여 제시합니다.
* **개선 제안 및 로드맵:** 단점과 KSF를 근거로 한 구체적인 **개선 제안** 항목들을 보여주고, 페르소나 격차가 큰 순서대로 단기/중기 실행 **우선순위 로드맵**을 3줄 내외로 간결하게 제안합니다.

<img src="agent/assets/스크린샷 2025-10-22 214648.png">

---

## 🛠️ 기술 스택

* **Frontend:** Streamlit
* **Backend:** Python
* **AI/LLM:** Google Gemini (`gemini-1.5-flash`)
* **Vector Database:** Milvus (on Zilliz Cloud)
* **Embeddings:** Hugging Face Endpoint Embeddings (`jhgan/ko-sroberta-nli`) via `langchain-huggingface`
* **Data Handling:** Pandas
* **Web Scraping (Agent 2):** Selenium, Naver Local Search API
* **Configuration:** Jinja2 (Prompts), python-dotenv

---

## 🔗 관련 링크 및 자료

* **Streamlit 서비스:** [https://2025-bigcontest-uwnj8yevx6qjrn5ccclqvy.streamlit.app/](https://2025-bigcontest-uwnj8yevx6qjrn5ccclqvy.streamlit.app/) 
* **서비스 상세 설명서:** [https://drive.google.com/file/d/1RBR971U5C5fK2WNWVk12lWQDDoLx2Iin/view?usp=sharing](https://drive.google.com/file/d/1RBR971U5C5fK2WNWVk12lWQDDoLx2Iin/view?usp=sharing)

---
## 👥 프로젝트 팀원 소개
|**팀원 1**|**팀원 2**|**팀원 3**|**팀원 4**|
|:----------:|:----------:|:----------:|:----------:|
|<img src="" width = 100 height = 100>|<img src = "agent/assets/1Asnf5J__400x400.jpg" width = 100 height = 100>|<img src = "" width = 100 height = 100>|<img src = "" width = 100 height = 100>|    
|[김채영]("")|[배주원](https://github.com/baejuwon-30)|[서선후]("")|[홍승민]("")|

## 🔎 팀원별 역할
|**이름**|**역할**|
|:-----:|:----------:|
|김채영|네이버지도 API를 이용한 리뷰 데이터 크롤링, Agent2, Agent3 구현|
|배주원|팀장, 벡터 디비 생성 및 Agent1 구현(RAG 구현)|
|서선후|선행 연구자료 조사, 에이전트 기획안 작성|
|홍승민|주제 구체화, 회복탄력성지수 계산 방법 제안|

---

## 🧭 프로젝트 회고록
- 김채영:
- 배주원: LLM을 이용하여 소상공인분들께 도움이 될 수 있다면 매우 뜻깊은 프로젝트가 될 것 같습니다. 주어진 데이터셋을 전처리하고 직접 벡터디비를 생성하며, RAG 시스템을 구현해봄으로써 실무적인 경험을 쌓을 수 있었습니다.
- 서선후:
- 홍승민:
